
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Extract changed files only with SVN - My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="I often need to get the whole directory tree of changed file. ONLY changed files. I used to do it by filtering the files in Total Commander by &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://w.ApproachE.com/blog/extract-changed-files-only-with-svn">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:w.ApproachE.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about/">About</a></li>
  <li><a href="/blog">Blog</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Extract Changed Files Only With SVN</h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-10T16:22:00+11:00" pubdate data-updated="true">Dec 10<span>th</span>, 2008</time>
        
      </p>
    
  </header>


<div class="entry-content"><div class='post'>
<p>I often need to get the whole directory tree of changed file. ONLY changed files. I used to do it by filtering the files in <a href="http://www.ghisler.com/">Total Commander</a> by modification date.</p>  <p>Now I&#8217;ve just prepared small script to do that for me using SVN and <a href="SharpScript">SharpScript</a>. You may tune it for your need, but here&#8217;s the good starting point for that.</p>  <p>Requirements:</p>  <ul>   <li>ScriptSharp installed in Program Files.</li>    <li>SVN client.</li>    <li>Resulting folder is always &#8216;Changes&#8217;.</li>    <li>Place these files in the same folder that is under SVN.</li> </ul>  <p>&#160;</p>  <p>Usage: run <font face="Courier New">get-svn-status.bat</font> (or just double click it).</p>  <p><strong><u><font face="Courier New">get-svn-status.bat</font>:</u></strong></p>  <div>   <pre style="padding-right: 0px; padding-left: 0px; font-size: 8pt; padding-bottom: 0px; margin: 0em; overflow: visible; width: 100%; color: black; border-top-style: none; line-height: 12pt; padding-top: 0px; font-family: consolas, &#39;Courier New&#39;, courier, monospace; border-right-style: none; border-left-style: none; background-color: #f4f4f4; border-bottom-style: none">del svn-changes.txt
svn status &gt;&gt; svn-changes.txt
<span style="color: #006080">&quot;C:\Program Files\Menees\SharpScript\SharpScriptConsole.exe&quot;</span> grabChanges.scs</pre>
</div>

<p>&#160;</p>

<p><strong><u><font face="Courier New">grabChanges.scs</font>:</u></strong>

  <br /></p>

<div>
  <pre style="padding-right: 0px; padding-left: 0px; font-size: 8pt; padding-bottom: 0px; margin: 0em; overflow: visible; width: 100%; color: black; border-top-style: none; line-height: 12pt; padding-top: 0px; font-family: consolas, &#39;Courier New&#39;, courier, monospace; border-right-style: none; border-left-style: none; background-color: #f4f4f4; border-bottom-style: none"><span style="color: #0000ff">using</span> SharpScript;
<span style="color: #0000ff">using</span> System;
<span style="color: #0000ff">using</span> System.IO;
<span style="color: #0000ff">using</span> System.Linq;

<span style="color: #0000ff">class</span> Program
{
    <span style="color: #0000ff">static</span> <span style="color: #0000ff">bool</span> IsChange(<span style="color: #0000ff">string</span> line) {
        <span style="color: #0000ff">char</span> mark = line[0]; <span style="color: #008000">// Rip off with nulls</span>
        <span style="color: #008000">// http://knaddison.com/technology/svn-status-code-cheat-sheet</span>
        <span style="color: #0000ff">switch</span> (mark) {
            <span style="color: #0000ff">case</span> <span style="color: #006080">'M'</span>: <span style="color: #008000">// Modified</span>
            <span style="color: #0000ff">case</span> <span style="color: #006080">'A'</span>: <span style="color: #008000">// Added</span>
            <span style="color: #0000ff">case</span> <span style="color: #006080">'C'</span>: <span style="color: #008000">// Confilict</span>
            <span style="color: #0000ff">case</span> <span style="color: #006080">'G'</span>: <span style="color: #008000">// merGed from repo to working copy            </span>
            <span style="color: #0000ff">return</span> <span style="color: #0000ff">true</span>;
        }
        <span style="color: #0000ff">return</span> <span style="color: #0000ff">false</span>;
    }
    
    <span style="color: #0000ff">public</span> <span style="color: #0000ff">static</span> <span style="color: #0000ff">void</span> Main(<span style="color: #0000ff">string</span>[] arArgs)
    {
        var folder = <span style="color: #006080">&quot;Changes&quot;</span>;
        <span style="color: #0000ff">try</span> {
            Directory.Delete(folder, <span style="color: #0000ff">true</span>);
        } <span style="color: #0000ff">catch</span>(DirectoryNotFoundException) {}; <span style="color: #008000">// We know why</span>
        Directory.CreateDirectory(folder);
        
        <span style="color: #0000ff">using</span>(var fs = File.OpenText(<span style="color: #006080">&quot;svn-changes.txt&quot;</span>)) {
            <span style="color: #0000ff">string</span> line = <span style="color: #006080">&quot;&quot;</span>;
            <span style="color: #0000ff">while</span> ((line = fs.ReadLine()) != <span style="color: #0000ff">null</span>) {
                <span style="color: #0000ff">if</span> (!IsChange(line)) <span style="color: #0000ff">continue</span>;
                Script.Echo(line);
                var filePath = line.Substring(7);
                var dest = folder + <span style="color: #006080">&quot;\\&quot; + filePath;
                
                Directory.CreateDirectory(Path.GetDirectoryName(dest));                
                File.Copy(filePath, dest, true/*overwrite*/);
            }            
        }
        
        Script.Echo(&quot;</span>Done&quot;);
    }
}</pre>
</div>

<p>&#160;</p>

<p>&#160;</p>

<p>Enjoy.</p>  </div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Dmytrii Nagirniak</div>
<div class='content'>
Hi Alex,<BR/><BR/>Thanks for the info.<BR/>I&#8217;ll try this out.</div>
</div>
<div class='comment'>
<div class='author'>Alexander</div>
<div class='content'>
Yes. Pinging.<BR/>There is a set of unix POSIX utils ported to WIndows, and having not that much deps. This package is called UnixUtils - http://unxutils.sourceforge.net/<BR/><BR/>This package includes most of the hardly used utilities, and Bourne shell implementation so you can run unix script on your win machine (surely, not often :) <BR/><BR/>The only thing required to do is to dl them, unpack somewhere and add /bin folder to your PATH environment variable. <BR/><BR/>Believe, having all this small text-processing utilities is VERY handsome for development, whatever you do. <BR/><BR/>Just to get some info on how to use these utils, search for unix Man page.</div>
</div>
<div class='comment'>
<div class='author'>Dmytrii Nagirniak</div>
<div class='content'>
Alex,<BR/>I have to do it on Windows, so Ubuntu is not for me.<BR/>I believe there should be something already available, but I just wrote it for my particular case.<BR/>Anywat, if you&#8217;ll see something like that for Win, please ping me.<BR/><BR/>Cheers.</div>
</div>
<div class='comment'>
<div class='author'>Alexander</div>
<div class='content'>
And, btw, found two more things:<BR/><BR/>1. Not sure you really need, but you always append the modified file list to the file, so after you commit come changes, make more changes again and run your script once more, you&#8217;ll get &#8216;old&#8217; files copied to the result folder, thous they are already in the repo<BR/><BR/>2. When checking the modification flag of svn status command, you don&#8217;t check for &#8216;?&#8217; (unversioned) files. They are usually treated as modified, too (they are new)<BR/><BR/>Surely, these two messages are just IMHO - I can not be sure about your intentions :)<BR/><BR/><BR/>THanks, anyway!</div>
</div>
<div class='comment'>
<div class='author'>Alexander</div>
<div class='content'>
Errr. <BR/>So, the code of the command itself follows:<BR/><BR/>cp `svn stat | grep ^[MG?AC] | awk &#8216;{print $2}&#8217;` ~/test</div>
</div>
<div class='comment'>
<div class='author'>Alexander</div>
<div class='content'>
When i hear about scripting support in the OS, I always think that my Ubuntu decision is Awesome!<BR/><BR/>You could do it within Ubuntu with the following command <BR/>lexaux@lexaux-laptop:12:33:38:main $cp `svn stat | grep ^[MG?AC] | awk &#8216;{print $2}&#8217;` ~/test</div>
</div>
</div>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Your Name</span></span>

      








  


<time datetime="2008-12-10T16:22:00+11:00" pubdate data-updated="true">Dec 10<span>th</span>, 2008</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/development/'>Development</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://w.ApproachE.com/blog/extract-changed-files-only-with-svn/" data-via="" data-counturl="http://w.ApproachE.com/blog/extract-changed-files-only-with-svn/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/search-for-property-somewhere-in/" title="Previous Post: Search for a property somewhere in JavaScript">&laquo; Search for a property somewhere in JavaScript</a>
      
      
        <a class="basic-alignment right" href="/blog/improve-html-forms/" title="next Post: Improve HTML Forms">Improve HTML Forms &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Dmytrii Nagirniak</h1>
  <img src="/about/me.jpg" title="Dmytrii Nagirniak photo" >
  <ul>
    <li>
      <a href="http://twitter.com/dnagir">Twitter</a>
    </li>
    <li>
      <a href="http://github.com/dnagir">Github</a>
    </li>
    <li>
      <a href="http://au.linkedin.com/in/dmitriynagirnyak">LinkedIn</a>
    </li>
    <li>
      <a href="mailto:d@ApproachE.com?subject=Just saying hi">d@ApproachE.com</a>
    </li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/knockoutjs-validations-video/">KnockoutJS Validations Screencast</a>
      </li>
    
      <li class="post">
        <a href="/blog/issues-switching-to-jruby-from-mri-19/">Issues switching to JRuby from MRI 1.9</a>
      </li>
    
      <li class="post">
        <a href="/blog/rails-plugin-with-tested-assets/">Rails Plugin with Tested Assets Screencast</a>
      </li>
    
      <li class="post">
        <a href="/blog/tips-on-usingterminal-in-mac/">Use your Terminal like a Pro</a>
      </li>
    
      <li class="post">
        <a href="/blog/templating-done-easy-javascript-haml/">Templating done easy - JavaScript HAML with Rails</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
