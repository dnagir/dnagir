<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: upgrade | Art Of Programming]]></title>
  <link href="http://ApproachE.com/blog/categories/upgrade/atom.xml" rel="self"/>
  <link href="http://ApproachE.com/"/>
  <updated>2012-03-06T11:06:30+11:00</updated>
  <id>http://ApproachE.com/</id>
  <author>
    <name><![CDATA[Dmytrii Nagirniak]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Migrating Eco3 to Eco5]]></title>
    <link href="http://ApproachE.com/blog/migrating-eco3-to-eco5/"/>
    <updated>2009-08-12T16:50:00+10:00</updated>
    <id>http://ApproachE.com/blog/migrating-eco3-to-eco5</id>
    <content type="html"><![CDATA[<div class='post'>
Just sharing my experience migrating large project (~170 classes in Business Objects ONLY) from Eco3 (Borland C# Builder and Together Modeler) to <a href="http://capableobjects.com/" target="_blank">Eco5</a>. <br />
This outlines the problems I faced, I don't want to dig into details and try to reproduce each case as I have had enough pain already. I also don’t care if it is <i>by-design</i>. I would describe the process not <i>the migration</i> but <i>the copy-pasting</i>.<br />
<ol>
<li>Code is not migrated. THE MOST of time is wasted doing copy-paste (in best case). </li>
<li>Interfaces are not migrated (so I have to put all the interfaces back and because of 1 implement them). </li>
<li>One-to-many association names are not preserved and default names are used. Breaks code. And no it is not even cross-package references. The association links 2 classes from same package on the same diagram. </li>
<li>Some associations are not imported at all. </li>
<li>The import process <i><b>added attributes</b></i> to classes that do not belong there. It definitely breaks runtime as mapping will not contain them (and yes, I discovered it later). </li>
<li>The import does not preserve IsNavigable for some associations. </li>
<li>Wrong migration of attributes in large hierarchy: the attribute in the middle of hierarchy has been put into its parent. </li>
<li>Import the same package twice gives very weird result: it duplicates all TaggedValues, Constraints, and <b>method parameters </b>(not methods)! Better it said me that the package already imported and did nothing as I had to manually correct everything. </li>
<li>The EcoSpace had to be reconfigured from scratch as there are too many changes from Borland.* to Eco.*. </li>
<li>Ordered value for associations is not preserved in some case (discover very late when could not make couple of tests pass). </li>
</ol>
I spent more than one and a half day for all that and now I can compile my model <b>AND</b> tests project. I still have some things marked with ObsoleteAttribute, but I’ll get to it later as I will be doing refactorings.<br />
The issues I have faced making all my tests to pass (related to ECO only):<br />
<ol>
<li>I cannot longer use custom class as type of an attribute (custom Money class). <b>This is a real showstopper</b>. Why newer version supports LESS! I had to use Decimal instead of custom class.&nbsp; <br /><span style="font-family: Courier New;">Attribute ClassName.TotalCostsAmount has an invalid type: Shared.Money. Only arrays, enums, strings and valuetypes are allowed</span> </li>
<li><strike>Significant </strike>OCL syntax changes that <b>breaks the runtime</b>. It cannot be detected at compile time as OCL is just a string. <strike>Best example:&nbsp; “<span style="font-family: Courier New;">self.Name-&gt;trim(true, true).length &gt; 0</span>”. which trims the string on both sides (indicated by boolean parameters). Now it should use normal .NET Trim method: “<span style="font-family: Courier New;">self.Name.Trim().length &gt; 0</span>”.</strike>&nbsp; (I missed to install my trim OCL operation).</li>
<li>HasUserCode on associations is not available. That was simple way of doing things (thou you have to prohibit explicitly other ways of changing associations). Now I have to implement <a href="http://www.capableobjects.com/apps/InstantForum414/FindPost3798.aspx" target="_blank">ISingleLinkCatcher</a>. Much better in terms of functionality but much worse in terms of maintenance. </li>
<li>The <a href="http://magpie.no-ip.com/mantis/view.php?id=524" target="_blank">bug</a> is still not fixed (derived attribute that uses externalId is not invalidate if it changes).</li>
<li>The <a href="http://magpie.no-ip.com/mantis/view.php?id=523" target="_blank">logging</a> has not been improved.</li>
</ol>
Usability issues on with the UML designer<br />
<ol>
<li>Cannot specify additional namespaces to be used for the whole package (so I have to go through every class). </li>
<li>Code generation takes a lot of time for simple change (2 minutes). It is related to the migration as during this process I often have to regenerate code and it just kills my time. </li>
<li>Cannot select MANY objects (properties, methods, associations) and change values for all of them. Instead have to go one by one (Don’t tell me I have to use the AutoForm!). </li>
<li>Sometimes the Modelr just freezes. It SHOWS the model but it is READ-ONLY. I cannot even select anything on it. VS restart helps. </li>
<li>Cannot search class <b>on the diagram</b> (“select as you type” kind of thing). There is search for the whole model but not on a single diagram.</li>
</ol>
<br />
<h4>
The outcome</h4>
<ul>
<li>About 12 hours to migrate the model and compile project. </li>
<li>About 4 (16 in total) hours to make ~40% of tests to pass. </li>
<li>About 4 (20 in total) hours to make ~90% of tests to pass. </li>
<li>About 2 (22 in total) hours to make all tests to pass EXCEPT ONE. </li>
<li>About 2 (24 in total) hours to make the last test to pass (related to the fact that I no longer use the Database for unit testing). </li>
</ul>
<h4>
Breathing out</h4>
At the moment of writing this I have my new ECO5 business objects and all the tests working.<br />
The migration process has not yet finished for the application in total but the major step is done and I can tell that I am happy with the overall result despite some frustrations.<br />
The biggest frustration is that I had to copy-paste old code to new objects. It probably took at least 80% of my time.<br />
Next thing is to migrate small WinForms utility. Will see how I go with it.<br />
<h4>
Last Note for those who does not want to write unit tests</h4>
It took me 3 working days to migrate all my system core with tests. Additionally tests were just a healthiness indicator. I am confident that without unit tests it would take at least one-two weeks in best case scenario.<br />
So guys: “"Stressed? Write a test!”.</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Impression on ASP.NET MVC 2]]></title>
    <link href="http://ApproachE.com/blog/impression-on-aspnet-mvc-2/"/>
    <updated>2009-08-04T08:58:00+10:00</updated>
    <id>http://ApproachE.com/blog/impression-on-aspnet-mvc-2</id>
    <content type="html"><![CDATA[<div class='post'>
<br />
You probably already know that <a href="http://haacked.com/archive/2009/07/30/asp.net-mvc-released.aspx" target="_blank">ASP.NET MVC Preview 1 has been released</a>. You can quickly watch the <a href="http://channel9.msdn.com/posts/Glucose/Hanselminutes-on-9-ASPNET-MVC-2-Preview-1-with-Phil-Haack-and-Virtual-Scott/" target="_blank">video</a> to get the impression.<br />
Overall, I must admit, I like it. Things I like the most:<br />
<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/ee308450%28VS.100%29.aspx" target="_blank">Display and Edit Templates</a> – I did workaround it in MVC 1 by using partials with specific name,</li>
<li>Areas support. As <a href="http://weblogs.asp.net/scottgu/archive/2009/07/31/asp-net-mvc-v2-preview-1-released.aspx" target="_blank">Scott explains</a> it allows to reuse various ASP.NET MVC projects.</li>
</ul>
What is do DISLIKE here:<br />
<ul>
<li><b>DataAnnotation</b> validation support – why are we <b>forced to apply attributes</b> on our model. I often have situations where I cannot tell exact validation rule developing the Model. I should specify it later. No way of doing it with DataAnnotations. There MUST be an interface for custom validation provider.</li>
<li>As far as I understand (from the Release Notes) <b>Views from Area projects should be copied</b> over to the main project. This IS UGLY IT IS NOT REUSABLE VIEW, IT IS CUT-AND-PASTABLE VIEW with all the consequences.</li>
</ul>
And I am also not sure what the effort is involved for ViewEngines to support the new Templates. I <i><b>guess</b></i>, it should not be a big deal. But it needs some attention.</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ASP.NET 4.0 – Do I need to jump into it?]]></title>
    <link href="http://ApproachE.com/blog/aspnet-40-do-i-need-to-jump-into-it/"/>
    <updated>2009-05-26T10:44:00+10:00</updated>
    <id>http://ApproachE.com/blog/aspnet-40-do-i-need-to-jump-into-it</id>
    <content type="html"><![CDATA[<div class='post'>
Just quickly going through the <a href="http://www.asp.net/learn/whitepapers/aspnet40/" target="_blank">whitepaper</a> published a while ago. I can see a lot of improvements around ASP.NET 4.0. But the ones below are probably the most important for me:<br />
<ul>
<li><a href="http://www.asp.net/learn/whitepapers/aspnet40/#_Toc223325467" target="_blank"><img align="right" height="379" src="http://static.asp.net/asp.net/images/whitepapers/aspnet40/whats-new-Fig1b.png" style="display: inline; margin-left: 0px; margin-right: 0px;" width="539" />AJAX Functionality</a>       <br />
<ul>
<li>Client Template Rendering – out of the box client-side templating engine. It seems to be very tightly integrated with ASP.NET infrastructure. DataView control looks very good. </li>
<li>Script Manager now allows to use any JS library and not only ASP.NET AJAX. </li>
<li>Very large client-side infrastructure support and integration with .NET (see pic) </li>
</ul>
</li>
<li>WebForms      <br />
<ul>
<li>Enabling View State for Individual Controls – nice addition. </li>
<li>Routing (it really came from ASP.NET MVC available in .NET 3.5) – it’s said that it is easier to use it. </li>
<li><a href="http://www.asp.net/learn/whitepapers/aspnet40/#_Toc223325481" target="_blank"><b>Setting Client IDs</b></a> – there have been a lot of feedback on it since .NET 1. And it seems Microsoft has finally attended this issue. It allows to control the IDs on the generated HTML. It my opinion this is one of the <b>most significant</b> improvements in WebForms. </li>
<li>FormView Control now can render content with not table at all which is great thing (finally!). </li>
<li>ListView has better control over the HTML. </li>
</ul>
</li>
<li>Data      <br />
<ul>
<li>Support for inheritance in Data Model for both EF and Linq2Sql. </li>
<li>EF supports many-to-many relationships. </li>
</ul>
</li>
<li>VS Web Designer Improvements      <br />
<ul>
<li>Improved CSS compatibility – better CSS 2.1 compliance (however I’m not sure how better it is). </li>
<li><a href="http://www.asp.net/learn/whitepapers/aspnet40/#_Toc223325501" target="_blank">Web.config transformation</a> – allows to modify the .config file before deployment. Very useful feature I wanted it so many times before. </li>
</ul>
</li>
</ul>
There are a whole bunch of other useful thins, but for me that’s it.<br />
Honestly saying I do not see too cardinal changes, I would say that a lot of outstanding issues have been addresses (especially control over generated HTML).&nbsp; I do not see big innovations here. So wouldn’t jump into ASP.NET 4.0 just now. And, who knows, maybe I’ll just totally skip and will pick ASP.NET 5.<br />
Just please do not mix ASP.NET 4 and .NET Framework 4 . There are numerous changes made in .NET 4.</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[NullReferenceException accessing ASP.NET MVC route values]]></title>
    <link href="http://ApproachE.com/blog/nullreferenceexception-accessing-aspnet/"/>
    <updated>2009-04-28T10:33:00+10:00</updated>
    <id>http://ApproachE.com/blog/nullreferenceexception-accessing-aspnet</id>
    <content type="html"><![CDATA[<div class='post'>
If by any chance you get NullReferenceException trying to access RouteValues in ASP.NET MVC make sure you have <a href="http://www.microsoft.com/downloads/details.aspx?FamilyId=FBEE1648-7106-44A7-9649-6D9F6D58056E&amp;displaylang=en" target="_blank">Visual Studio 2008 SP1</a> installed.<br />
I’d recommend to <a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=27673c47-b3b5-4c67-bd99-84e525b5ce61&amp;displaylang=en" target="_blank">download the ISO</a> because I had some problems using the web installer.<br />
Have a look at <a href="http://forums.asp.net/p/1414895/3123105.aspx" target="_blank">this thread</a> for more details.</div>

]]></content>
  </entry>
  
</feed>
