
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Art Of Programming</title>
  <meta name="author" content="Dmytrii Nagirniak">

  
  <meta name="description" content="Why? Because it is easy to get the dates/times wrong without even realising it.
Even if you don&rsquo;t need to support multiple time zones, you can &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ApproachE.com/blog">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/DmitriyNagirnyak" rel="alternate" title="Art Of Programming" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-17928352-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Art Of Programming</a></h1>
  
    <h2>musings by Dmytrii Nagirniak</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="http://feeds.feedburner.com/DmitriyNagirnyak" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="http://feedburner.google.com/fb/a/mailverify?uri=DmitriyNagirnyak" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ApproachE.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about/">About</a></li>
  <li><a href="/blog/archives/">Blog</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/testing-rails-across-time-zones/">Testing Rails Across Time Zones</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-10T11:14:00+10:00" pubdate data-updated="true">Jul 10<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Why?</h2>

<p>Because it is easy to get the dates/times wrong without even realising it.
Even if you don&rsquo;t need to support multiple time zones, you can catch a lot of
the edge cases.</p>

<h2>How?</h2>

<ol>
<li>Randomise time zone when running specs</li>
<li>Run the specific specs across the different time zones</li>
</ol>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/testing-rails-across-time-zones/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/increase-your-productivity-with-vim-and-terminal/">Increase Your Productivity in Vim and Terminal</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-12T06:30:00+11:00" pubdate data-updated="true">Mar 12<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post will give you <em>minimal</em> suggestions that
you can apply in your daily work to immediately increase your productivity.</p>

<p>I&rsquo;m writing this after watching the <a href="http://blog.steveklabnik.com/posts/2012-02-22-two-pomodoros">Steve Klabnik&rsquo;s screencast</a>
where he is working <em>&ldquo;in a wild&rdquo;</em>.</p>

<p>I love this idea and have done videoing
how I work on a little <a href="http://approache.com/blog/rails-plugin-with-tested-assets/">ios-checkboxes</a>
and <a href="http://approache.com/blog/knockoutjs-validations-video/">knockout-rails</a>.</p>

<p>The world would an awesome place if more people (yes, including <strong>you</strong>) would start sharing the way they work.
Well done Steve!</p>

<p>But today I want to focus on just a few things that should dramatically improve the productivity.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/increase-your-productivity-with-vim-and-terminal/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/how-to-care-for-introverts/">How to Care for Introverts</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-08T08:25:00+11:00" pubdate data-updated="true">Mar 8<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve just found an <a href="http://afterwordss.tumblr.com/post/5274763919">interesting poster</a> that describes how to deal with introverts.</p>

<p>Being an introvert myself I agree with most of the points:</p>

<ul>
<li>Respect their <strong>need for privacy</strong>.</li>
<li>Never embarrass them in <strong>public</strong>.</li>
<li>Let them observe first in <strong>new situations</strong>.</li>
<li>Give them <strong>time to think</strong>. Don&rsquo;t demand instant answers.</li>
<li><strong>Don&rsquo;t interrupt </strong>them.</li>
<li>Give them <strong>advance notice</strong> of expected changes in their lives.</li>
<li>Give them <strong>15 minute warnings</strong> to finish whatever they are doing before calling them to dinner or moving on to the next activity.</li>
<li>Reprimand them <strong>privately</strong>.</li>
<li><strong>Teach</strong> them new skills privately rather than in public.</li>
<li>Enable them to find <strong>one best friend</strong> who has similar interests and abilities; encourage this relationship even if the friend moves.</li>
<li>Do not push them to make <strong>lots of friends</strong>.</li>
<li><strong>Respect</strong> their introversion. Don&rsquo;t try to remake them into extroverts.</li>
</ul>


<p>I&rsquo;m pretty sure it is just a common sense. But it helps when people do know it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/migrating-from-blogger-to-octopress/">Migrating From Blogger to Octopress</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-04T20:09:00+11:00" pubdate data-updated="true">Mar 4<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve been a Blogger user since 2006 and decided to switch over to something more geeky.</p>

<p>This post will cover some of the reasons for that and also will provide an overview
of how to migrate from Blogger to Octopress.</p>

<h2>What do I want to achieve?</h2>

<ul>
<li><strong>Merging</strong> my personal site and blog &ndash; those were totally separate, unrelated entities, not good enough.</li>
<li>Write <strong>more often</strong>, using the same tools I use on a daily basis (Vim ATM).</li>
<li>More <strong>hands-on</strong> kind of blogging, I actually do want to do the dirty work messing with HTML/CSS etc.</li>
</ul>


<h2>Reasons for switching:</h2>

<ul>
<li><strong>Markdown, HAML, bare bones HTML</strong>. I wanted to have a bit more control over how my blog looks like.</li>
<li><strong>Blogging software</strong> isn&rsquo;t good enough. Unfortunately I haven&rsquo;t found yet a good <strong>geeky</strong> S/W for blogging.</li>
<li><strong>Easier to write</strong> from Vim. Writing is much easier, not moving my hands off the keyboard and staying in the terminal.</li>
<li><strong>Version controlled</strong>. Nice to have, but not crucial for me.</li>
</ul>


<h2>Why I didn&rsquo;t want to switch:</h2>

<ul>
<li>Losing <strong>PageRank</strong>, which shouldn&rsquo;t really be an issue (see below).</li>
<li><strong>Uncerteinities</strong>. So now I have to maintain it myself? Take care of updates? Hell, yeah!</li>
<li><strong>Self-hosted</strong>. Nothing to say here.</li>
<li>I have never ever needed to do anything with the blog in terms of maintenance while being on Blogger. I really just worked.</li>
</ul>


<p>Switching to a self-hosted blog/site will require a bit of involvement from me.
But this is something I am willing to take. It&rsquo;s time to take my ass out of the comfy couch of Blogger.</p>

<h2>So how to actually migrate?</h2>

<p>I would split it into the following larger steps:</p>

<ol>
<li>Preparation.</li>
<li>Deployment.</li>
<li>Finalisation.</li>
</ol>


<h2>Preparation</h2>

<p>At this stage you need to <a href="http://octopress.org/docs/setup">setup the Octopress itself</a>, <a href="http://octopress.org/docs/configuring">configure</a> it and import your existing posts from Blogger.</p>

<p>I won&rsquo;t go into details how to <a href="http://octopress.org/docs/theme">customise</a> and set it up, you see the links.</p>

<p>I&rsquo;ll go directly into the migrating the Blogger posts over to Octopress.</p>

<p>What you need to do is</p>

<ol>
<li>Export your Blogger posts.</li>
<li>Use <a href="https://gist.github.com/1765496">this script</a> to import it into Octopress.</li>
</ol>


<p>After you do this, all you&rsquo;ll get a bunch of posts that are already part of your site.
Double check whether everything is correct or not. You may want to tweak the script for your needs.</p>

<p><em>Note</em> that the script also imports the comments, but in a little ugly way.
(<em>TIP</em>, you may want to disable commenting before exporting the posts from Blogger).</p>

<p>Next thing you want to do is to update your Octopress RSS feed URL so that existing subscribers won&rsquo;t be lost.
I am using FeedBurner and I had to set <code>subscribe_rss: http://feeds.feedburner.com/DmitriyNagirnyak</code> in the <code>_config.yml</code></p>

<p>Now that you&rsquo;ve got your posts, you want to set-up the redirection from your blog to your new site.</p>

<p>I prepared <a href="https://github.com/dnagir/approache-redirects/blob/master/app.rb">simple Sinatra application</a> for that.
You definitely want to fork and tweak it to your needs. Note that I&rsquo;m not using the <code>blog/YYYY/MM/DD/title</code> format.
I just use the <code>blog/title</code> format.</p>

<p>Now go ahead and deploy this app. I&rsquo;ve decided to use Heroku for that which is the simplest and easiest way to go.</p>

<p>But <strong>make sure you deploy to the domain of your blog</strong>. For example, my Blogger blog was hosted on the <code>blog.approache.com</code> and I deployed it to this domain.</p>

<p>It of course will not take any affect until you change your DNS settings.
But this will enable permanent redirects immediately when you&rsquo;ll do that (thus preserving all your old links).</p>

<h2>Deployment</h2>

<p>By now you should have:</p>

<ul>
<li>The Octopress site ready to go (with all the posts migrated).</li>
<li>Blogger redirection deployed.</li>
</ul>


<p>It&rsquo;s time to go ahead and actually <a href="http://octopress.org/docs/deploying">deploy</a> your Octopress site.</p>

<p>I wanted to merge <code>blog.approache.com</code> into the <code>approache.com</code> so I deployed the new site to <code>approache.com</code>
(hosted on <em>Github Pages</em>).</p>

<p>Now make sure everything is working properly and you have dome everything right.
If you&rsquo;ve missed something out, then go ahead and fix it. Then redeploy.</p>

<p>This may take a couple of iterations to get it right.</p>

<p>The point here is that you basically now have 2 blogs &ndash; one is the old Blogger, the other &ndash; the Octopress.
You can experiment with the Octopress here, but don&rsquo;t do it for too long (I would say max of 1 day).</p>

<p>After you&rsquo;re happy with the new site and blog it&rsquo;s time to finalise everything.</p>

<h2>Finalisation</h2>

<p>Next step is to make sure your subscribers will still receive updates through the FeedBurner.
For that:</p>

<ol>
<li>Sign in into FeedBurner.</li>
<li>Replace the original feed URL by the Octopress&#8217; one (which is something like <code>http://ApproachE.com/atom.xml</code>).</li>
</ol>


<p>By now you should be ready to switch your your Blogger domain to your main site.</p>

<p>You probably will do it simply by changing your DNS record to point to your Octopress server.
In my case I had to change the DNS record from <code>blog - CNAME - ghs.google.com</code> to <code>. - A - 207.97.227.245</code> (dot means top-level domain here).</p>

<p>Since you&rsquo;ve already deployed your redirection app, all the old links will still work.
All the PageRank should be preserved.</p>

<p>The very last thing to do is to <strong>disable the Blogger</strong> if you want to.</p>

<h2>Summary</h2>

<p>Switching to Octopress was relatively painless thanks to Blogger&rsquo;s ability to export posts and the script that could import it into Octopress.</p>

<p>Preserving URL was relatively easy too and the rest was left to FeedBurner and DNS hosting.</p>

<p>Hope this is helpful for you.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/knockoutjs-validations-video/">KnockoutJS Validations Screencast</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-22T20:31:00+11:00" pubdate data-updated="true">Dec 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div>
If you wonder how you can use KnockoutJS with Rails in a similar way to Backbone.js or Spine.js then <a href="http://www.youtube.com/watch?v=cJzQl-bpmUI">watch the video</a>. It also shows how easy it is to apply client side validations that work alongsite with the server-side validations.<br />
<br />

<iframe width="560" height="315" src="http://www.youtube.com/embed/cJzQl-bpmUI?hd=1" frameborder="0" allowfullscreen></iframe>

<div>
Have a look at the <a href="https://github.com/dnagir/knockout-rails">knockout-rails</a> project for more details.
</div>

</div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Dmytrii Nagirniak</div>
<div class='content'>
This is actually <a href="https://gist.github.com/9ca5dce0524927d69655" rel="nofollow">one of the options</a> of validating in the background: <br /><br />It doesn&#39;t include the bindings, but gives idea how it can be done. Easier than I thought actually.</div>
</div>
<div class='comment'>
<div class='author'>Dmytrii Nagirniak</div>
<div class='content'>
Pre-validating on the server can technically be done with the Model Events. But it&#39;s not supported out of the box.<br /><br />It is a good idea, but there&#39;s a bit more complexity involved on both client and server. But I&#39;ll gladly accept pull requests to knockout-rails if somebody needs to support that.</div>
</div>
<div class='comment'>
<div class='author'>Aleksey Gureiev</div>
<div class='content'>
This comment has been removed by the author.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/issues-switching-to-jruby-from-mri-19/">Issues Switching to JRuby From MRI 1.9</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-29T11:51:00+11:00" pubdate data-updated="true">Nov 29<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">
<b>UDPATE</b>: The reason for switching to JRuby the native neo4j API. Have to use REST API with MRI.<br />
<br />
This is just a quick recap of what issues I have had trying to switch existing app from MRI Ruby (1.9.3) to JRuby (1.6.4).<br />
<br />
Unfortunately I stepped back and didn&#8217;t want to spend more time as it felt an unbreakable chain of issues. Resolving one, you think &#8220;huh, awesome&#8221;. But very soon you hit the next.<br />
And I couldn&#8217;t see it stopping.<br />
<br />
<b>But PLEASE bear in mind</b> that I only spent a couple of hours on that. With a little bit more persistence, you may be able to the end of the tunnel.<br />
<br />
The overall impression is that it is not a big deal really. The problems arise when trying to use other libraries. And unfortunately, not all of the gems <b>care deep enough to support JRuby</b>. And this is the biggest issue in my opinion, there are very little issues with JRuby itself. The transition (from the syntax perspective) was extremely easy.<br />
<br />
The application is pretty standard Rails 3.1 app that uses gems like Dragonfly, inherited_resources, cancan, paper_trail, Authlogic, CoffeeScript, Haml, Sass, Formtastic etc. For testing - things like rspec-rails, cucumber-rails, capybara-webkit, guard (rspec and cucumber), database_cleaner etc.<br />
<br />
So here is a quick list of the things that I faced on my way.<br />
<br />
Before everything else I enabled support for 1.9 syntax in JRuby (export JRUBY_OPTS=&#8211;1.9).<br />
<br />
It all first started with <a href="https://gist.github.com/1402753">the weird issue</a> where the <b>wrong arguments were passed to RSpec shared example</b>.<br />
Unfortunately I did not figure out why it happened and just patched it as you can see in the comments there.<br />
<script src="https://gist.github.com/1402753.js?file=sample_spec.rb">
</script>

<br />
<br />
<br />
After fixing this issue I had another one related to <b>database_cleaner</b>. So I ended up with a <a href="https://github.com/bmabey/database_cleaner/pull/83">pull request</a> that worked for me.<br />
<br />
The other issue was a<b> huge stack trace</b>. I scrolled 3 pages in the terminal to get to the top. Most of that stack trace is deep inside Java. Additionally I got <b>wrong line number</b> on exception. This &#8220;features/step_definitions/company_steps.rb:234&#8221; makes me thing that the exception is at line 234. But that file only had 49 lines of code. Now, go figure.<br />
<br />
Going on&#8230; <a href="https://github.com/colszowka/simplecov">SimpleCov</a> gem didn&#8217;t work out of the box and gave the warning that I need to enable debugging. That&#8217;s fine and understandable. But after half an hour of debugging of unrelated exception, it turned out that <b>SimpleCove threw an exception</b> because of that. So had to go and explicitly disable it.<br />
<br />
Then I managed to run all of my specs. But I was pretty surprised how <b>slow</b> it was:<br />
<pre><code>
# rvm use 1.9.3
# time rspec # real=14s, rspec time ~ 12s

# rvm use jruby
# time rspec # real=52s, rspec time ~ 30s

</code>
</pre>
But this is expected as JRuby doesn&#8217;t have enough time to optimise here. It should be much better in production. But it will be also shit slow after deployment.<br />
Ok. That&#8217;s fine. <b>I can trust it&#8217;s fast</b>.<br />
<br />
Then I tried running the cucumber specs and had to file the <a href="http://jira.codehaus.org/browse/JRUBY-6237">issue</a> to support <b>new Ruby 1.9.3 syntax</b> (a = b = f 1). Not a big deal, easily fixed with parens: a = b = f(1).<br />
<br />
Next and the <b>final issue</b> - I could not run the <b>headless cucumber specs</b> (capybara-webkit). It just got stuck (no CPU used) and feels like there is a <b>dead-lock</b> or something similar.<br />
<br />
I couldn&#8217;t see way of fixing it easily and decided that for now I am <b>done with</b> it. So going <b>back to Ruby 1.9.3</b>.<br />
<br />
<br />
<b>To summarise</b>, I <b>did not feel like it&#8217;s a problem</b> to switch to JRuby. But it&#8217;s really a <b>big deal to actually use</b> it due to the number of <b>C extensions</b> that JRuby doesn&#8217;t really support.<br />
<br />
Again, to emphasise, there is nothing horribly wrong with JRuby and it seems to be pretty good. But the real showstoppers are the C extensions.</div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Dmytrii Nagirniak</div>
<div class='content'>
Totally with you on this. But real world seems to be a bit different :)</div>
</div>
<div class='comment'>
<div class='author'>Postmodern</div>
<div class='content'>
Yet another reason to avoid C-extensions. When selecting dependencies for a new project, I prefer to select pure-Ruby libraries or FFI bindings (https://github.com/ffi/ffi#readme). Pure-Ruby libraries should be faster on Rubinius/JRuby. FFI bindings work perfectly on both MRI and JRuby.<br /><br />If developers want faster Ruby code, they should help make MRI faster (or switch to Rubinius/JRuby), instead of writing more code in C.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/rails-plugin-with-tested-assets/">Rails Plugin With Tested Assets Screencast</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-19T20:47:00+11:00" pubdate data-updated="true">Nov 19<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">
Some of the most valuable things you can learn are not written in books, not shown in the presentations and demos. Those come from seeing how <i>others</i> work.<br />
<br />
How do they do all those small things? What tricks do they have? How would they approach that problem?<br />
<br />
Unfortunately, I can&#8217;t remember seeing people sharing the way they actually work (unless they pair). I want to see what mistakes they make, how they fix those, how they try to come up with a word erasing a line 10 times.<br />
I believe all this is of a great value for a lot of us.<br />
<br />
What I described is <i>partially</i>&nbsp;done by PeepCode&#8217;s Play By Play series and Tekpub. Those are amazing (usually). But that&#8217;s not exactly what I am after. Those screencasts are high quality, polished and prepared ones. YOU are NOT featuring there. I want to see YOU there. All of you, guys.<br />
<br />
<br />
So I decided to make a first step (or maybe not so) and screencast myself while working on a Rails Plugin.<br />
<br />
This is mostly real-time work. You&#8217;ll see how I fail, you&#8217;ll spot the mistakes I&#8217;ve done and did not even notice, you&#8217;ll see how I write README. And, most importantly, you will hopefully see some of the things that will help <i>yourself</i>.<br />
<br />
This video features the following tools/technologies:<br />
<br />
<ul style="text-align: left;">
<li>Ruby, Ruby On Rails</li>
<li>CoffeeScript</li>
<li>SASS</li>
<li>Git, Github</li>
<li>Vim (MacVim and Terminal)</li>
<li>Jasmine and basic testing of JavaScript and even CSS assets</li>
<li>etc</li>
</ul>
<div>
Additionally, before watching, make sure you Turn On the Volume. Rare person doesn&#8217;t like the music that my wife helped me prepare. Even if you don&#8217;t not like the video, you should like the music :)</div>
<div>
<br /></div>
<div>
I hope you enjoy it. <strong>UPDATE: Please watch it in full screen as the quality is lower than I expected.</strong>
</div>
<div>
<br /></div>
<div>
<br /></div>
<div>

<iframe width="560" height="315" src="http://www.youtube.com/embed/MWvLofLz04k?hd=1" frameborder="0" allowfullscreen></iframe>


</div>
<div>
<br /></div>
<div>
<br /></div>
<div>
<br /></div>
<div>
P.S.: Screencasting is really hard. And that&#8217;s my first. So&nbsp;apologies&nbsp;if something isn&#8217;t in-place.</div>
<div>
(If you can&#8217;t see the video here, open it on&nbsp;<a href="http://vimeo.com/32357445">Vimeo</a>. Alternatively, try <a href="http://www.youtube.com/watch?v=MWvLofLz04k">YouTube</a> - it should work with HTML5-only browser).</div>
<br />
<br />
<br />
<br /></div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Dmytrii Nagirniak</div>
<div class='content'>
Pleased to know that you liked it. Yeah, the music sometimes goes a bit off. But it is still fun as for me :)</div>
</div>
<div class='comment'>
<div class='author'>Flaviu Simihaian</div>
<div class='content'>
Great video. I also love the music. Beethoven seems to get extra-dramatic near the testing pain point :)<br /><br />Look forward to seeing more in the future and hope to do some  myself.<br /><br />Thanks,<br /><br />Flaviu</div>
</div>
<div class='comment'>
<div class='author'>Dmytrii Nagirniak</div>
<div class='content'>
Sorry about that. I&#39;ve embedded the YouTube version of the video. It is of a little better quality.</div>
</div>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
Video on vimeo is bad quality, I had to watch it on Youtube. Thanks for videolesson.</div>
</div>
<div class='comment'>
<div class='author'>Dmytrii Nagirniak</div>
<div class='content'>
If more people will need it, I will probably upload higher resolution somewhere. Have you tried <a href="http://www.youtube.com/watch?v=MWvLofLz04k" rel="nofollow">YouTube</a>?<br /><br />And in the future I will have to record at much lower screen resolution</div>
</div>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
If see screencast from page - text is unreadable and font size is too small, at full screen (1080p) - too blur and unreadable too. may be if i&#39;ll have possibility to view at custom player size - it&#39;s will be ok.</div>
</div>
<div class='comment'>
<div class='author'>Dmytrii Nagirniak</div>
<div class='content'>
Try it on YouTube: http://www.youtube.com/watch?v=MWvLofLz04k<br /><br />I&#39;ll update the post a bit later with both links.</div>
</div>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
Unfortunately vimeo does not support html5 video</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tips-on-usingterminal-in-mac/">Use Your Terminal Like a Pro</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-04T12:53:00+11:00" pubdate data-updated="true">Oct 4<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div>
Keep your config in a separate dotfiles directory and under source control with the structure like:<br />

<pre><code>
~/dotfiles:
--+ bashrc, bash_profile
--+ ssh/config
-->--bash -&gt; (env, config, aliases). bash has source bach/env, bash/config etc.
</code></pre>

<br />
Then:<br />
<code>ln -s ~/.bashrc ~/bin/dotfiles</code>
<br />
<code>echo ". ~/.bashrc" > ~/.bash_profile</code>

<br />
<br />

Put everything into .bashrc except any long running tasks.<br />
.bash_profile - for interactive shells. But you can just usually source .bashrc.<br />

Now some keyboard shortcuts:<br />
<br />

<ul>
<li>Cntrl-a - go to the beginning of line</li>
<li>Cntrl-e - go to the end of line</li>
<li>Cntrl-k - delete everything to the right</li>
<li>Cntrl-w - delete previous word</li>
<li>ESC->-b - go back one word</li>
<li>ESC->-f - go forward one word</li>
</ul>

<br />
If you often connect via SSH like so:
<code>ssh -p 2323 username@my-server.example.com</code>

Then you can shorten it to <code>ssh my-server</code> if you will add entry to <code>~/.ssh/config</code>:
<pre><code>
Host my-server
    HostName my-server.example.com
    Port 2323
    User username
</code></pre>

Then you can use it as:

<pre><code>
# Tunnelling
ssh -L7997:127.0.0.1:7979 my-server

# Copy folder to server
scp my_folder my-server:my_other_folder/

# Or even use it with git
git clone my-server:repo-name.git

</code></pre>

<br /><br />

Now some useful things you can do in the terminal:

<ul>
<li><code>!!</code> - run previously executed command (you can do `sudo !!` for example)</li>
<li><code>!$</code> - last argument of previous command</li>
<li><code>!60</code> - run the command #60. Number comes from <code>history</code> command</li>
(for example: run <code>tail file.log</code> and then <code>cat !$</code> is same as <code>cat file.log</code></li>
<li><code>!echo</code> - rerun last command starting with echo</li>
<li>Ctrl-r - interactive search on history of commands; Use Ctrl-j to abandon.</li>
<li><code>!?file.log?!</code> - run the last matching command (not interactive)</li>
<li><code>^file.log^another-file.log</code> - run the last matching command replacing file.log with another-file.log</li>
<li><code>!?file.log?!</code> - run the last matching command (not interactive)</li>
<li><code>mv README.{txt,markdown}</code> - same as <code>mv README.txt README.markdown</code>.</li>
</ul>

<br /><br />

You will also appreciate power of the shell when using aliases and functions:
<pre><code>
alias ss=&quot;./script/server&quot;
alias s=&quot;git status&quot;
alias gca=&quot;git commit -am&quot;
alias zipr=&quot;zip -r&quot;

function take {
  mkdir $1
  cd $1
}
# take create-and-go-here

function gg() {
  git commit -v -a -m &quot;$*&quot;
}
# gg Commit message with no quotes
</code></pre>

<br /> <br />
But when functions get more complicated, you might want to use a scripting language (Ruby, Python etc).

<br />
Put those scripts into your ~/bin directory and add it to your PATH variable.

<br /><br />
There are also number of Mac specific tricks.
<br />
One is is <code>open anything</code> command that will open the file/directory in the default application.
<br />
You can also force it to use a specific app:
<code>open -a /Applications/Firefox.app index.html</code>.
<br />
This one becomes a good candiate for an alias.

<br /> <br />
You can also pipe output of any command into <code>pbcopy</code> command to copy it to the clipboard.
<br />
For example:
<code>cat index.html | pbcopy</code> will copy the content of the file into clipboard.
<br /><br />
You can also do it the other way around: <code>pbpaste &gt; index.html</code> or 
<code>pbpaste | grep "jquery"</code>.
<br /><br /><br />

Another useful thing <a href='http://homepage.mac.com/thomasw/OpenTerminal/'>OpenTerminal</a> (drag the app to finder toolbar).
It allows you to open terminal with the current directory set to the Finder window.

<br /><br /><br />
You can also use the keyboard to open terminal using <a href='http://www.obdev.at/products/launchbar/'>LaunchBar</a>. It does much more though. It acts like a global terminal for the system.


<br /><br /><br />
You can also try to use <code>zsh</code> shell. It will work with the existing bash aliases just fine.
<br /><br /><br />

Most of the tips here come from the PeepCode&#8217;s Advanced Command Line screencast.
<br />

Hope this helps you on your way to becoming a Terminal Guru.

</div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/templating-done-easy-javascript-haml/">Templating Done Easy - JavaScript HAML With Rails</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-19T19:26:00+10:00" pubdate data-updated="true">Aug 19<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<h3>
HAML templating with no worries: native, precompiled HAML. Blazing fast and as easy to use as it can be. </h3>

<h3>
<strong>
<em>UPDATE: this functionality moved into <a href='https://github.com/dnagir/ruby-haml-js'>ruby-haml-js</a> gem, please use it instead.</em>
</strong>
</h3>

Recently I have been working on a Ruby gem that packs a set of common JavaScript libraries in one place so you can just reference those easily from <b>Rails 3.1</b> app.  But now I want to write a bit about a very handy tool that the gem includes.  I needed to work on a <a href='http://documentcloud.github.com/backbone'>Backbone</a> app and, unfortunately, there was no very simple and easy way of using HAML markup for my client side templates. Main problems: <ol>
<li>I don&#8217;t want to <b>embed</b> the template into the document.</li>
<li>The Underscore.js templating is ok, but it is <b>too verbose</b> for me (as most of others).</li>
<li>The <a href="https://github.com/creationix/haml-js">haml-js</a> is great, but I do not want to bother <b>precompiling</b> the templates.</li>
<li>I do not want to think about templating as another layer or component. I want it to <b>just work</b>.</li>
</ol>

<div>
Fortunately it was pretty easy solve these <em>problems</em> with the <a href="https://github.com/sstephenson/sprockets">Sprockets</a> and Rails 3.1.
</div>

<div>
So from now on you can just write normal HAML templates and consume those with no worries from JavaScript.
</div>

<div>
All you need to do, is to add <a href="https://github.com/dnagir/pakunok">pakunok</a> gem to your Rails 3.1 Gemfile.  This will give you templates as <b>native JavaScript functions</b> that you can use.
</div>


<div>
It&#8217;s better to <a href='https://gist.github.com/1156409'>see than hear</a>
</div>

<div>
<script src="https://gist.github.com/1156409.js">
</script>
</div>

<div>
 Feel free to head to the <a href="https://github.com/dnagir/pakunok/issues">issues</a> and provide some feedback or <a href="https://github.com/dnagir/pakunok/">read more</a>.</div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/easy-rails-deployment-with-capistrano/">Easy Rails Deployment With Capistrano and Custom Nginx Configs</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-19T00:58:00+10:00" pubdate data-updated="true">May 19<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>
In my <a href="http://blog.approache.com/2011/05/setting-up-ubuntu-1104-server-for-rails.html">previous post</a> I provided some info about setting up the server for rails app.

</p>

<p>
Now I am going to describe the Nginx configuration and example of Capistrano deployment file.
</p>

<p>
One thing that I don&#8217;t want to do for every new app I deploy is to go to the web server and change the settings (as a root user) so that the web server picks the Rails application.
</p>

<p>
In order to avoid that I decided to use nginx&#8217;s <a href="http://wiki.nginx.org/CoreModule#include">include</a> command. It allows to add include multiple nginx config files using UNIX wildcards.
</p>

<p>
So by simply adding this line to the nginx.config I make it possible to configure Nginx from Rails applicatoins themselves:
<code>include /home/*/apps/*/current/nginx.conf;</code>.

I decided to include all configs within <code>http</code> tag so that a Rails app can configure multiple servers for itself.
</p>

<p>
There are obvious drawbacks for this:

<ol>
<li>It is less &#8220;safe&#8221; as on application might affect others if you will start adding Nginx settings outside of the <code>server</code> tag. But I am ready to sacrifice this for the sake of having more flexibility by assuming all server citizens are good guys.</li>
<li>We still need to have root access to restart the Nginx. We shouldn&#8217;t need to do it often, so that&#8217;s ok with me.</li>
</ol>

Now relying on a very simple conventions, I can configure Nginx from within the app. Just in case you&#8217;ve missed it, the conventions are:

<ol>
<li>To deploy a rails app (and any Rack based app), user should put the app under his home directory in <code>apps/[name]/current</code>.</li>
<li>To &#8220;enable&#8221; an app, user should put <code>nginx.conf</code> file in <code>apps/[name]/current</code>.</li></ol>

</p>


<p>
But for now, all this cool structure isn&#8217;t very helpful unless we deploy the app.
</p>

<p>
I went with the Ruby de-facto deployment tool - Capistrano. There are enough resources on the net on how to &#8220;Capify&#8221; your application, so I won&#8217;t go into details. I assume you have just done <code>capify .</code> and understand what is going in there.
</p>

<p>
Briefly, what I need to do is following:

<ol>
<li>Deploy the app explicitly to a particular domain (staging, production, local server etc).</li>
<li>On every deployment - backup SQLite database (I know, I&#8217;ll use something better when I&#8217;ll have 1 million users).</li>
<li>Prepare Nginx config file for the server (it depends on the domain we deploy at).</li>
<li>Pre-Compile assets (SCSS in my case).</li>
</ol>

</p>

<p>
So grab <a href="https://gist.github.com/978737">the gist</a> (embedded below) with all the details and let me know what can be improved there. The usage is pretty simple: 
</p>

<p>
<code>cap deploy user=dnagir domain=connecty.approache.com</code>
</br />
You can deploy the same app multiple times to the same server with different subdomains and they will not conflict:
<br />

<code>cap deploy user=dnagir domain=staging.connecty.approache.com</code>
<br />
<code>cap deploy user=dnagir domain=demo.connecty.approache.com</code>

</p>

<p>
The most interesting I think is that the <code>nginx.conf</code> file is created during deployment using default Ruby templating engine and transfered over to the right location on the server. (But still remember root-ed Nginx restart is still required).
</p>

<p>You can look at the complete source in the <a href="https://github.com/dnagir/connecty/tree/bdd10b8e2bcd946a62cc66075d87ac107e513305">Connecty project</a> at Github.
</p>

<p>Please feel free to tell me what you think about this process.</p>

<script src="https://gist.github.com/978737.js?file=deploy.rb"></script>
<script src="https://gist.github.com/978737.js?file=nginx.production.conf.erb"></script></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>jlertle</div>
<div class='content'>
Love it!</div>
</div>
</div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Dmytrii Nagirniak</h1>
  <img src="/about/me.jpg" title="Dmytrii Nagirniak photo" >
  <ul>
    <li>
      <a href="http://twitter.com/dnagir">Twitter</a>
    </li>
    <li>
      <a href="http://github.com/dnagir">Github</a>
    </li>
    <li>
      <a href="http://au.linkedin.com/in/dmitriynagirnyak">LinkedIn</a>
    </li>
    <li>
      <a href="mailto:d@ApproachE.com?subject=Just saying hi">d@ApproachE.com</a>
    </li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/testing-rails-across-time-zones/">Testing Rails across time zones</a>
      </li>
    
      <li class="post">
        <a href="/blog/increase-your-productivity-with-vim-and-terminal/">Increase your productivity in Vim and Terminal</a>
      </li>
    
      <li class="post">
        <a href="/blog/how-to-care-for-introverts/">How to care for Introverts</a>
      </li>
    
      <li class="post">
        <a href="/blog/migrating-from-blogger-to-octopress/">Migrating from Blogger to Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/knockoutjs-validations-video/">KnockoutJS Validations Screencast</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("dnagir", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/dnagir" class="twitter-follow-button" data-show-count="false">Follow @dnagir</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Dmytrii Nagirniak -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'approache';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
