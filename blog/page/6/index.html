
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Art Of Programming</title>
  <meta name="author" content="Dmytrii Nagirniak">

  
  <meta name="description" content="Another useful tip for NHAML users that I came up with. I am assuming the site with following technical description: Every page has common CSS. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ApproachE.com/blog/page/6">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/DmitriyNagirnyak" rel="alternate" title="Art Of Programming" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-17928352-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Art Of Programming</a></h1>
  
    <h2>musings by Dmytrii Nagirniak</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="http://feeds.feedburner.com/DmitriyNagirnyak" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="http://feedburner.google.com/fb/a/mailverify?uri=DmitriyNagirnyak" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ApproachE.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about/">About</a></li>
  <li><a href="/blog/archives/">Blog</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/nhaml-scripts-and-styles-code-block/">NHAML – Scripts and Styles, Code Block</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-14T16:51:00+10:00" pubdate data-updated="true">Jul 14<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Another useful tip for NHAML users that I came up with. I am assuming the site with following technical description:<br />
<ol>
<li>Every page has common CSS. </li>
<li>Every page has common scripts. </li>
<li>Some page may include up to 2 additional CSS files. </li>
<li>Some pages may include up to 2 additional JS files. </li>
<li>Soma pages may include Google Maps Script. </li>
<li>Some pages may include some of the above based on conditions. </li>
</ol>
Having these I want to make it as easy as it can be. With WebForms view engine it is not really problematic but it is too verbose. It means more code, more time spent more errors.<br />
But with NHAML it makes it a breath.<br />
Satisfying requirements 1 and 2 i not a problem at all. This is not a problem with WebForms as well. Just including those files in the master page.<br />
What about other? Well, easy. Here is whet i write to satisfy 3 and 4.<br />
<pre class="csharpcode">^ css = ""
^ script = ""
%h2 Product Details

OR
^ css = "another"
^ script = "another"
%h2 Product Details</pre>
<style type="text/css">
.csharpcode, .csharpcode pre
{
 font-size: small;
 color: black;
 font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
 background-color: #ffffff;
 /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
 background-color: #f4f4f4;
 width: 100%;
 margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<br />
<br />
What happens here? By using empty string I declare that I want to include the script/css from the default location with default name for the given controller. This is convenient and conventional. This way I enforce that the assets (JS, CSS) are not going to be mixed with views or something else.<br />
In first example I just say “Hey! I need CSS and Script for current controller!”. 
  <br />In second example I say&nbsp; “Hey! I need CSS and Script for current controller with name <i>another</i>!”. 

  <br />
You don’t care how and where they will be included. You just tell what you need. That’s it.<br />
This is how we can include 2 script and 2 CSSs:<br />
<pre class="csharpcode">^ css = <span class="str">""</span>
^ script = <span class="str">""</span>
^ csss = <span class="str">"another"</span>
^ scripts = <span class="str">"another"</span></pre>
<br />
Ok. Let’s go to 5. The idea is the same but much more “typed”:<br />
<pre class="csharpcode">^ needMap = <span class="kwrd">true</span>
^ script = <span class="str">"map-integration"</span></pre>
Can it be any easier? We say here: “Mate, I need map on this page. Also don’t forget to give me script that integrates the map with my page.”.<br />
<br />
Ok. Now we came to the last point – 6. This is freaking easy as well:<br />
<pre class="csharpcode">- if (Model.CanEdit)
  ^ script = ""
  ^ css = ""
  ^ needMap = true
  ^ script2 = "map-integration"</pre>
We tell here: “If current user can edit this page then please add default script and css for the controller, include map and integration script for it.”<br />
And the possibilities to play with it are unlimited. How does this magic happen?<br />
All is defined in the NHAML “master page” which is called <i>layout</i>. And here it is:<br />
<pre class="csharpcode">^ string css = null;
^ string css2 = null;
^ string script = null;
^ string script2 = null;
^ bool needMaps = false;
%html{xmlns="http://www.w3.org/1999/xhtml"}
  %head
    != Html.Content().EmitCommonStyles()
    != css==null ? null : Html.Content().EmitCss(css)
    != css2==null ? null : Html.Content().EmitCss(css2)
    != needMaps ? "<span class="kwrd">&lt;</span><span class="html">script</span> <span class="attr">type</span><span class="kwrd">='text/javascript'</span> <span class="attr">src</span><span class="kwrd">='http://maps.google.com/maps/api/js?sensor=false'</span><span class="kwrd">&gt;&lt;/</span><span class="html">script</span><span class="kwrd">&gt;</span>" : null

    != Html.Content().EmitCommonScripts()    
    != script==null ? null : Html.Content().EmitScript(script)
    != script2==null ? null : Html.Content().EmitScript(script2)
    
  %body  </pre>
<br />
I don’t want to explain this – go figure. This is easy as well… Or… ok. in 2 words:<br />
<ol>
<li>We define .NET variable in the layout using “^” symbol. </li>
<li>The variables defined using “^” are accessible in any page. </li>
<li>There are 2 types of code blocks in NHAML: 
    <br />
<ol>
<li>starts with “-” - evaluates in its own scope (for simplicity let’s say its scope of page of another block); </li>
<li>starts with “^” – evaluates in the global scope AND before all other scoped blocks (eg: “-”). </li>
</ol>
</li>
</ol>
Thanks to <a href="http://twitter.com/SimonCropp" target="_blank">Simon</a> for explaining this.<br />
Exercise for you: make the layout to satisfy these requirements:<br />
<ol>
<li>Some pages may have page title (the one shown in the browser): “Action – Area – SiteName” </li>
<li>Some pages may have page title: “Action – SiteName” or “Area – SiteName”. </li>
<li>If neither Action nor Area are provided site will have in its title “SiteName”. </li>
<li>A page should not be required to specify anything if it doesn’t need to. So if a page doesn’t provide neither Action nor Area it should not have any code at all to handle this. </li>
</ol>
Can you do that? [Tip: NHAML supports extension methods as well.]</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/nhaml-tips/">NHAML – Tips</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-08T11:06:00+10:00" pubdate data-updated="true">Jul 8<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I’ve working with NHAML for some time. I <a href="http://dnagir.blogspot.com/2009/07/nhaml-impressions.html" target="_blank">just love</a> it.<br />
Now I want to share some issues that I have faced and how I solved them.<br />
This is small Question/Answer list:<br />
<hr />
Q1: What is NHAML analogue of <br />
<pre class="csharpcode"><span class="asp">&lt;%</span>= Html.ActionLink(<span class="str">"Home"</span>, <span class="str">"Index"</span>, <span class="str">"Home"</span>)<span class="asp">%&gt;</span></pre>
<style type="text/css">
.csharpcode, .csharpcode pre
{
 font-size: small;
 color: black;
 font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
 background-color: #ffffff;
 /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
 background-color: #f4f4f4;
 width: 100%;
 margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<br />
A1: != Html.ActionLink(&#8220;Home&#8221;, &#8220;Index&#8221;, &#8220;Home&#8221;)<br />
<hr />
Q2: What is NHAML analogue of 
  <br />
<pre class="csharpcode"><span class="asp">&lt;%</span>= Server.HtmlEncode(Model.Name) <span class="asp">%&gt;</span></pre>
A2: &amp;= Model.Name<br />
<hr />
Q3: What is analogue of<br />
<pre class="csharpcode"><span class="kwrd">&lt;</span><span class="html">a</span> <span class="attr">href</span><span class="kwrd">='&lt;%= Html.Content().HomeLink %&gt;' target=’_blank’</span><span class="kwrd">&gt;</span>Home<span class="kwrd">&lt;/</span><span class="html">a</span><span class="kwrd">&gt;</span></pre>
A3: More complex code should be wrapped in #{}: 
  <br />%a { href=#{Html.Content().HomeLink} target=”_blank”} Home<br />
BUT see Q4<br />
<hr />
Q4: What is analogue of<br />
<pre class="csharpcode"><span class="kwrd">&lt;</span><span class="html">a</span> <span class="attr">href</span><span class="kwrd">='&lt;%=Model.ProductUrl %&gt;'</span> <span class="attr">target</span><span class="kwrd">='_blank'</span><span class="kwrd">&gt;</span><span class="asp">&lt;%</span>= Server.HtmlEncode(Model.ProductName) <span class="asp">%&gt;</span> <span class="kwrd">&lt;/</span><span class="html">a</span><span class="kwrd">&gt;</span></pre>
A4: Simple code may not be wrapped in anything: 
  <br />%a { href=Model.ProductUrl target=”_blank”} &amp;= Home<br />
<hr />
Q5: What is analogue of:<br />
<pre class="csharpcode"><span class="asp">&lt;%</span> <span class="kwrd">foreach</span>(Product currentProduct <span class="kwrd">in</span> Model.Products) {<span class="asp">%&gt;</span>
  <span class="asp">&lt;%</span> Html.RenderPartial(<span class="str">"ProductInfo"</span>, currentProduct); <span class="asp">%&gt;</span>
<span class="asp">&lt;%</span> }; <span class="asp">%&gt;</span></pre>
A5: Local variables (currentProduct) are available in partial views (_ProductInfo):<br />
<pre class="csharpcode">- foreach(Product currentProduct in Model.Products)
  _ ProductInfo</pre>
<hr />
Q6: What about HTML encoding?<br />
A6: See the <a href="http://code.google.com/p/nhaml/wiki/NHamlLanguageReference" target="_blank">reference</a> for more info. Shortly: if you want to encode – use “&amp;=”, if you don’t – use “!=”.<br />
<hr />
Q7: Can I use WebForms View engine and NHAML?<br />
A7: Yes. No problem with that. In fact I do it as a fallback in case something goes wrong (hope it will never happen :) ).<br />
<hr />
Q8: Any integration with Visual Studio<br />
A8: At the moment I am aware of Visual Studio <a href="http://code.google.com/p/nhaml/wiki/VisualStudioPlugin" target="_blank">syntax highlighter</a> plug-in only .<br />
<hr />
This should be enough for now :)</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/nhaml-impressions/">NHAML – Impressions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-08T10:34:00+10:00" pubdate data-updated="true">Jul 8<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I have introduced the <a href="http://code.google.com/p/nhaml/" target="_blank">NHAML</a> into a new project. Just can’t silently ignore it. This is great thing. Really great. It does save time and helps to concentrate on the presentation of the view in ASP.NET MVC. I just love. Additionally it has great coverage of unit tests and code looks really good. So I believe in its quality.<br />
<br />
This is the quote:<br />
<blockquote>
<i>&#8220;Haml is a markup language that‘s used to cleanly and simply describe the XHTML of any web document, without the use of inline code. Haml functions as a replacement for inline page templating systems such as PHP, ERB, and ASP. However, Haml avoids the need for explicitly coding XHTML into the template, because it is actually an abstract description of the XHTML, with some code to generate dynamic content.&#8221;</i><br />
In other words, NHaml is an external DSL for XHTML. It’s primary qualities are it’s simplicity, terseness, performance and that it outputs nicely formatted XHTML. Additionally, the NHaml view engine provides support for Rails style layouts and partials and ships with an ASP.NET MVC view engine. </blockquote>
<br />
Why do you want to use NHAML:<br />
<ul>
<li>Want to write less code. </li>
<li>Do not want to repeat the HTML closing tags. </li>
<li>Want to generate valid XHTML easier. </li>
<li>Tired of chaging type of the model in ASPX.</li>
<li>Tired of writing      <br />
<pre class="csharpcode"><span class="asp">&lt;%</span>= Server.HtmlEncode(Model.Name) <span class="asp">%&gt;</span></pre>
<style type="text/css">
.csharpcode, .csharpcode pre
{
 font-size: small;
 color: black;
 font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
 background-color: #ffffff;
 /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
 background-color: #f4f4f4;
 width: 100%;
 margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style><style type="text/css">
.csharpcode, .csharpcode pre
{
 font-size: small;
 color: black;
 font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
 background-color: #ffffff;
 /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
 background-color: #f4f4f4;
 width: 100%;
 margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

  </li>
<li>Want to keep it simple. </li>
<li>Want mark-up to drive the rules and not code. </li>
</ul>
Why you don’t:<br />
<ul>
<li>Want to have intelly-sence in the view. </li>
<li>Want to use Visual Studio MVC integrated features: 
    <br />
<ul>
<li>Go to Controller (from view) </li>
<li>Go to View (from controller action) </li>
<li>Add view (from controller action) </li>
</ul>
</li>
<li>Don’t want to bother with new syntax (even when it takes minutes to learn) </li>
</ul>
I thought about Spark view engine. It promotes that the presentation drives the rules but not code. But still NHAML suits me&nbsp; much better and it drives the presentation much better.<br />
You’ll find enough on the Internet on the NHAML. Don’t forget to view the <a href="http://code.google.com/p/nhaml/wiki/NHamlLanguageReference" target="_blank">reference</a> as there are some changes to the syntax that might not be reflected in topics on the net.<br />
Also don’t forget to say thanks to guys working on it by <a href="http://code.google.com/p/nhaml/" target="_blank">donating</a> (see the button at the bottom) them.<br />
I plan to post couple of tips on it later.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/how-guy-was-promoting-web-site/">How a Guy Was Promoting a Web Site</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-01T17:11:00+10:00" pubdate data-updated="true">Jul 1<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I got a friendly email from a guy (I don’t know him) who was trying to promote his web site. It looked pretty new and was about sharing the developer resources.<br />
He asked me to contribute. There are plenty of similar sites.<br />
Next day I saw the guys is willing to chat with me in Gmail.<br />
I wanted to know where he found me from and then see if i can help him. Yes I am often concerned where they get the email from. In fact I had number of similar situation and everybody was happy at the end of the day (they got their promotions in one or the other way, I just got “thanks” or something more material).<br />
<br />
Here’s our short discussion. How do you like it?<br />
At the end of it I felt like I owe him something. Ridiculous. Don’t you think so?   <br />The part I like is that guys is talking how he liked my articles nut was not able to clarify that. Should I tell here what website it was about?<br />
<span style="font-family: Courier New;"><b><span style="color: red;">vrrave</span></b>: hi      <br /> Sent at 16:40 on Wednesday      <br /><b><span style="color: teal;">me</span></b>: Hi      <br /><b><span style="color: red;">vrrave</span></b>: how is life over there?      <br />where ur blog man      <br /> Sent at 16:42 on Wednesday      <br /><b><span style="color: teal;">me</span></b>: pretty good, beeing busy these days.      <br />yourself?      <br /><b><span style="color: red;">vrrave</span></b>: me to      <br />but still i&#8217;m expecting at least a article once a week      <br /> Sent at 16:44 on Wednesday      <br /><b><span style="color: teal;">me</span></b>: Just wondering how did you find me?      <br /><b><span style="color: red;">vrrave</span></b>: y?      <br />you dont like to keep contact with me?      <br />Please tell      <br />if you are not willing&#8230;      <br /><span style="color: teal;">me</span>: No, I&#8217;m just interesting how you have found me. You sent me email with invitation to your site. So you probably get it from somewhere?      <br /><b><span style="color: red;">vrrave</span></b>: Yes      <br />man      <br />i like ur work styles and ur articles      <br />from the aspallaince      <br />that y i try contact u      <br /> Sent at 16:49 on Wednesday      <br /><b><span style="color: teal;">me</span></b>: I don&#8217;t remember any articles ont the aspalliance. Can you remind me?      <br /><b><span style="color: red;">vrrave</span></b>: or codeproject?      <br /> Sent at 16:51 on Wednesday      <br /><span style="color: teal;">me</span>: nope      <br /><b><span style="color: red;">vrrave</span></b>: ok sorry man      <br />i will delete ur account      <br />sorry for distrubinf u      <br /> Sent at 16:53 on Wednesday      <br /><span style="color: teal;">me</span>: So where did you get my email from?      <br /><b><span style="color: red;">vrrave</span></b>: i think some of ur blog or ur articles      <br />OK</span><br />
<span style="font-family: Courier New;"><b><span style="color: teal;">me</span></b>: Do you remember which one?      <br /><b><span style="color: red;">vrrave</span></b>: no      <br />do one thign      <br />search in google      <br />u will get      <br />bye      <br /><b><i>(he went offline immidiately)</i></b>      <br /> Sent at 16:56 on Wednesday      <br /><b><span style="color: teal;">me</span></b>: I havn&#8217;t got what you wanted to talk about to me.      <br />bye.</span></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Viktor</div>
<div class='content'>
Nice communication )</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/simplicity/">Simplicity</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-01T11:44:00+10:00" pubdate data-updated="true">Jul 1<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I like a lot the post by Rob Conery <a href="http://blog.wekeroad.com/blog/youre-not-your-data-access/" target="_blank">here</a>. Be simpler. Just must quote him:<br />
<blockquote>
You’re Not Your Data Access.</blockquote>
<br />
Just do what is needed and…<br />
<blockquote>
Let. It. Go.</blockquote>
All this is so true:<br />
<blockquote>
Simplicity is beautiful. Simple doesn’t mean hard-coding, it doesn’t mean cutting corners or being sloppy – it means building what you’ve been asked to build, not a rocket to Saturn and most of the time it’s a skateboard to the corner store.<br />
Not every application needs to be stitched together from Codebetter posts and Twitter rants. Focus on what’s important – the experience, not what’s under the hood. You’ll change that quite a few times no matter what you think</blockquote>
<br />
Cannot agree more.   <br />We, developers, are just doing tools for people to help them. That&#8217;s the point. <br />
I see the tendency that many people change their believes in time. 2 years ago one could say &#8220;You should always retrieve data via abstract Repository&#8221;. Nowadays he/she says: &#8220;It doesn&#8217;t give benefits I expect, so I just explicitly use the querying abilities of my favourite OR/M&#8221;. <br />
So just stick to want you are confident with&#8230;   <br />And, yes, just <b><u>K</u></b>eep <b>I</b>t <b>S</b>imple <b>S</b>tu… :)</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/mvcintegrationtestframework/">MvcIntegrationTestFramework</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-30T16:02:00+10:00" pubdate data-updated="true">Jun 30<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Have a look at the interesting topic: <a href="http://blog.codeville.net/2009/06/11/integration-testing-your-aspnet-mvc-application/" target="_blank">Integration Testing Your ASP.NET MVC Application</a>.<br />
Not sure how mature all the stuff is but it’s definitely the thing I was missing in ASP.NET for a long time.<br />
We’ll see if I have a chance to try it.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/overcoming-unavailable-raiserror-in-udf/">Overcoming Unavailable RAISERROR in UDF</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-23T17:50:00+10:00" pubdate data-updated="true">Jun 23<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
If you want to indicate an error from UDF first thing you will try (SQL Server) is:<br />
<pre class="csharpcode">RAISERROR(<span class="str">'Invalid argument for MyUDF'</span>, 16, 1)</pre>
<style type="text/css">
.csharpcode, .csharpcode pre
{
 font-size: small;
 color: black;
 font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
 background-color: #ffffff;
 /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
 background-color: #f4f4f4;
 width: 100%;
 margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<br />
BUT, this won&#8217;t work and you will get an error:<br />
<code>Invalid use of 'RAISEERROR' within a function.</code> 

<br />
<br />
This is disappointing (also mention the misspelled RAISE<b>E</b>RROR in the message).<br />
Searching the can bring alternatives.<br />
The simplest one is division by zero:<br />
<pre class="csharpcode"><span class="kwrd">SELECT</span> 1/0</pre>
With this people will remember you for a long time (and not from a good side). PLEASE DO NOT DO IT FOR GOD’S SAKE.<br />
<br />
I choose the one below. It at least allows me to include the error message:<br />
<pre class="csharpcode"><span class="kwrd">SET</span> @<span class="kwrd">dummy</span> = (<span class="kwrd">SELECT</span> <span class="kwrd">CAST</span>((<span class="str">'Invalid argument for MyUDF'</span>) <span class="kwrd">AS</span> <span class="kwrd">INT</span>))</pre>
And will give error message:<br />
<code>Syntax error converting the varchar value 'Invalid argument for MyUDF' to a column of data type int.</code> 

<br />
<br />
Better than division by zero and definitely better than nothing.<br />
Hope this helps.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/automatically-rollback-transaction-on/">Automatically Rollback Transaction on Error in T-SQL</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-16T09:54:00+10:00" pubdate data-updated="true">Jun 16<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
During any kind of data migration you don’t want to leave any data changed in the middle of migration when an error occurs.<br />
By default Microsoft Sql Server continues batch execution if an error occurs. It skips ONLY the statement with the error.<br />
To make sure it will rollback the transaction use SET <a href="http://msdn.microsoft.com/en-us/library/aa259192%28SQL.80%29.aspx" target="_blank">XACT_ABORT</a> ON before opening a transaction.<br />
Just some stupid example from the top of my head:<br />
<pre class="csharpcode"><span class="kwrd">SET</span> XACT_ABORT <span class="kwrd">ON</span>

<span class="kwrd">BEGIN</span> <span class="kwrd">TRAN</span>

  <span class="kwrd">UPDATE</span> PaymentTax
    <span class="kwrd">SET</span> Amount = p.Amount * 0.1
  <span class="kwrd">FROM</span>
    Payment p, PaymentTax t
  <span class="kwrd">WHERE</span>
    t.PaymentId = p.Id
    <span class="kwrd">AND</span> p.PaymentType = 1 <span class="rem">-- CreditCard</span>

  <span class="rem">-- Do more stuff in-between</span>

  <span class="kwrd">UPDATE</span> Payment
    <span class="kwrd">SET</span> Amount = Amount - Amount*0.1
  <span class="kwrd">WHERE</span> PaymentType=1 <span class="rem">-- CreditCard</span>

<span class="kwrd">COMMIT</span> <span class="kwrd">TRAN</span></pre>
<style type="text/css">
.csharpcode, .csharpcode pre
{
 font-size: small;
 color: black;
 font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
 background-color: #ffffff;
 /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
 background-color: #f4f4f4;
 width: 100%;
 margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style><style type="text/css">
.csharpcode, .csharpcode pre
{
 font-size: small;
 color: black;
 font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
 background-color: #ffffff;
 /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
 background-color: #f4f4f4;
 width: 100%;
 margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style><style type="text/css">
.csharpcode, .csharpcode pre
{
 font-size: small;
 color: black;
 font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
 background-color: #ffffff;
 /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
 background-color: #f4f4f4;
 width: 100%;
 margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<br />
setting the SET XACT_ABORT ON will ensure there will be no possibility of changing Payments’ amount without changing tax.<br />
The XACT_ABORT is available at least since Sql Server 20000 so should be ok if you work with different versions of SqlServer.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009-aspnetpro-readers-choice-award/">2009 asp.netPRO Readers Choice Award Winners</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-01T09:30:00+10:00" pubdate data-updated="true">Jun 1<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Interesting <a href="http://www.aspnetpro.com/articles/2009/05/asp200905rca_f/asp200905rca_f.asp" target="_blank">results</a> of this year’s ASP.NET PRO readers’ choice award (making the note for myself, as usually):<br />
<table border="1" cellpadding="0" cellspacing="0"><tbody>
<tr>       <td width="20%"><b>Category</b></td>        <td width="30%"><b>Winner</b></td>        <td width="20%"><b>Runner-Up</b></td>        <td width="30%"><b>Honorable Mention</b></td>        <td width="30%"><b>My comment</b></td>     </tr>
<tr>       <td valign="top"><b>Add-in</b></td>        <td valign="top"><b>Developer Express CodeRush for Visual Studio .NET</b></td>        <td valign="top">JetBrains&#8217; ReSharper</td>        <td valign="top">Madinina Software&#8217;s CodeObject for Visual Studio .NET</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Charting and Graphics Tool</b></td>        <td valign="top">Developer Express XtraCharts Suite</td>        <td valign="top">Telerik RadChart for ASP.NET AJAX</td>        <td valign="top">Dundas Chart for .NET</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Chat Application</b></td>        <td valign="top">Xigla Software&#8217;s Absolute Live Support .NET</td>        <td valign="top">CuteSoft Components&#8217; Cute Chat</td>        <td valign="top">Web Furbish&#8217;s JaxterChat ASP.NET Chat Control</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Code Editor</b></td>        <td valign="top">IDM Computer Solutions&#8217; UltraEdit</td>        <td valign="top">Helios Software Solutions&#8217; TextPad</td>        <td valign="top">SlickEdit Tools for Microsoft Visual Studio</td>        <td width="30%">I still like Notepad++</td>     </tr>
<tr>       <td valign="top"><b>Communications Tool</b></td>        <td valign="top">/n software&#8217;s IP*Works!</td>        <td valign="top">Dart Communications&#8217; PowerTCP for .NET</td>        <td valign="top">Catalyst Development&#8217;s SocketTools .NET Edition</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Community Resource</b></td>        <td valign="top">DevExpress Community Site/Developer Express</td>        <td valign="top">The Code Project</td>        <td valign="top">Microsoft&#8217;s ASP.NET Site</td>        <td width="30%">I think Telerik should be here…</td>     </tr>
<tr>       <td valign="top"><b>Component Set</b></td>        <td valign="top">Developer Express DXperience            <br />
ASP.NET</td>        <td valign="top">Telerik RadControls for ASP.NET            <br />
AJAX</td>        <td valign="top">ComponentOne Studio Enterprise</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Content Management System</b></td>        <td valign="top">Microsoft Office SharePoint Server 2007 - Web Content Management</td>        <td valign="top">DotNetNuke Professional Edition</td>        <td valign="top">Telerik Sitefinity CMS</td>        <td width="30%">Why there’s still no better OSS CMS than DNN?</td>     </tr>
<tr>       <td valign="top"><b>e-Commerce Package</b></td>        <td valign="top">AbleCommerce Asp.Net Shopping Cart</td>        <td valign="top">AspDotNetStorefront</td>        <td valign="top">Corporate Web Solutions&#8217; .netCART</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>E-mail Control</b></td>        <td valign="top">360 IMPACT&#8217;s ASP.NET Auto Email</td>        <td valign="top">Advanced Intellect&#8217;s aspNetEmail</td>        <td valign="top">/n software&#8217;s IP*Works! S/MIME </td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Forum Application</b></td>        <td valign="top">Telligent Community Server</td>        <td valign="top">BV Software&#8217;s DotNetBB Forums</td>        <td valign="top">Active Modules&#8217; Active Forums</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Grid</b></td>        <td valign="top">Developer Express ASPxGridView</td>        <td valign="top">Telerik RadGrid for ASP.NET AJAX</td>        <td valign="top">FarPoint Spread for ASP.NET</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Hosting Service</b></td>        <td valign="top">DiscountASP.NET</td>        <td valign="top">Applied Innovations</td>        <td valign="top">MaximumASP</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>IDE</b></td>        <td valign="top">Microsoft Visual Studio</td>        <td valign="top">Delphi Prism</td>        <td valign="top">Sun Microsystems&#8217; Sun Studio 8</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Navigation Control</b></td>        <td valign="top">Developer Express ASPxNavBar</td>        <td valign="top">Telerik RadMenu for ASP.NET AJAX</td>        <td valign="top">ComponentOne Menu for ASP.NET</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Online Editor</b></td>        <td valign="top">Developer Express ASPxHTML Editor</td>        <td valign="top">Telerik RadEditor for ASP.NET AJAX</td>        <td valign="top">Infragistics NetAdvantage for ASP.NET WebHtmlEditor</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Polling Tool</b></td>        <td valign="top">CodeWidgets.com&#8217;s Online Voting/Survey Web-App</td>        <td valign="top">PeterBlum.com&#8217;s Peter&#8217;s Polling Package</td>        <td valign="top"></td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Printing/Reporting Tool</b></td>        <td valign="top">Developer Express XtraReports Suite</td>        <td valign="top">Telerik Reporting</td>        <td valign="top">GrapeCity-data Dynamics&#8217; ActiveReports for .NET</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Project Management/Defect Tracking</b></td>        <td valign="top">Axosoft&#8217;s OnTime 2009</td>        <td valign="top">Fog Creek Software&#8217;s FogBugz</td>        <td valign="top">Seapine Software&#8217;s TestTrack Pro</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Scheduling/Calendar Tool</b></td>        <td valign="top">Developer Express ASPxScheduler</td>        <td valign="top">Telerik RadScheduler for ASP.NET AJAX</td>        <td valign="top">ComponentOne WebSchedule/WebCalendar</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Security Tool</b></td>        <td valign="top">PreEmptive Solutions&#8217; Dotfuscator</td>        <td valign="top">/n software&#8217;s IP*Works! SSL</td>        <td valign="top">Novalys&#8217;s Visual Guard for .NET</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Testing/QA Tool</b></td>        <td valign="top">Telerik WebUI Test Studio (powered by ArtOfTest)</td>        <td valign="top">Red Gate Software&#8217;s ANTS Profiler</td>        <td valign="top">AutomatedQA&#8217;s TestComplete</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Training</b></td>        <td valign="top">ASPSmith.com&#8217;s ASP.NET Training</td>        <td valign="top">Telerik Training</td>        <td valign="top">AppDev Training</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Utility</b></td>        <td valign="top">Developer Express ASPxSpellChecker</td>        <td valign="top">Telerik RadSpell for ASP.NET AJAX</td>        <td valign="top">CodeSmith Tools&#8217; CodeSmith</td>        <td width="30%"></td>     </tr>
<tr>       <td valign="top"><b>Silverlight</b></td>        <td valign="top">Developer Express AgDataGrid Suite</td>        <td valign="top">Telerik RadControls for Silverlight</td>        <td valign="top">ComponentOne Studio for Silverlight</td>        <td width="30%"></td>     </tr>
</tbody></table>
<br />
It is interesting that <i>Infragistics</i> is presented in only one winning category. Definitely DevExpress and Telerik are the most used and competing products.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/mygeneration/">MyGeneration</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-05-27T13:38:00+10:00" pubdate data-updated="true">May 27<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Another useful code generation tool.<br />
Site: <a href="http://www.mygenerationsoftware.com/" title="http://www.mygenerationsoftware.com">http://www.mygenerationsoftware.com</a><br />
Licence: Proprietary, free. Does not allow distribution or linking to the product.</div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/7/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/5/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Dmytrii Nagirniak</h1>
  <img src="/about/me.jpg" title="Dmytrii Nagirniak photo" >
  <ul>
    <li>
      <a href="http://twitter.com/dnagir">Twitter</a>
    </li>
    <li>
      <a href="http://github.com/dnagir">Github</a>
    </li>
    <li>
      <a href="http://au.linkedin.com/in/dmitriynagirnyak">LinkedIn</a>
    </li>
    <li>
      <a href="mailto:d@ApproachE.com?subject=Just saying hi">d@ApproachE.com</a>
    </li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/how-to-care-for-introverts/">How to care for Introverts</a>
      </li>
    
      <li class="post">
        <a href="/blog/migrating-from-blogger-to-octopress/">Migrating from Blogger to Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/knockoutjs-validations-video/">KnockoutJS Validations Screencast</a>
      </li>
    
      <li class="post">
        <a href="/blog/issues-switching-to-jruby-from-mri-19/">Issues switching to JRuby from MRI 1.9</a>
      </li>
    
      <li class="post">
        <a href="/blog/rails-plugin-with-tested-assets/">Rails Plugin with Tested Assets Screencast</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("dnagir", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/dnagir" class="twitter-follow-button" data-show-count="false">Follow @dnagir</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Dmytrii Nagirniak -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'approache';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
